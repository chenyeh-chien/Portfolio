---
title: "TCP vs UDP"
date: "2025-12-01"
description: "TCP vs UDP"
tags: ["tcp-vs-udp"]
cover: "/og/tcp-vs-udp.png"
category: "Security"
---

****

### TCP (Transmission Control Protocol)
—— 像「雙方簽收的掛號信」
TCP 的核心精神是**「可靠性」**。在傳送數據之前，它必須確保對方已經準備好接收，並在傳送後確認對方真的收到了。

- 三向握手 (Three-way Handshake)：連線前會先確認「你在嗎？」、「我在，你準備好了嗎？」、「準備好了」。
- 錯誤重傳：如果中間有一小段數據弄丟了，TCP 會自動要求重寄，直到數據完整無缺。
- 循序傳輸：確保接收到的順序跟發出時一模一樣。
- 適合場景：網頁瀏覽 (HTTP/HTTPS)、電子郵件 (SMTP)、檔案傳輸 (FTP)。這些情況下，少掉任何一個位元（Bit）都會導致檔案損毀。

#### HTTP (Standard Requests)
底層： TCP

特性： 所有的標準 fetch()、axios 或 AJAX 請求，底層百分之百是 TCP。

原因： 網頁需要確保數據（HTML/JS/圖片）完整無缺，所以必須使用可靠的 TCP。

#### Socket.io
底層： TCP (透過 WebSocket)

特性： Socket.io 主要是基於 WebSocket 協定。雖然它能實現「即時、雙向」溝通，但 WebSocket 本身是在 HTTP 之上建立的，底層依然是 TCP。

原因： 它需要確保你的聊天訊息或遊戲指令按順序且不漏掉地傳送。

**** 

### UDP (User Datagram Protocol)
—— 像「廣播」或「普通平信」
UDP 的核心精神是**「速度」與「效率」**。它不管對方有沒有收到，也不管順序，只管把數據「噴」出去。

- 無連線 (Connectionless)：不需要先打招呼，數據直接丟過去。
- 不保證到達：丟了就丟了，它不會回頭去補寄。
- 极低延遲：因為省去了確認的步驟，反應速度非常快。
- 適合場景：線上遊戲、視訊會議、直播、語音通話。在這些場景下，掉一兩個影格（Frame）沒關係，但絕對不能為了等一個舊封包而導致畫面卡頓。

#### WebRTC (唯一的 UDP 門票)
如果你開發的是 視訊通話、語音聊天或點對點 (P2P) 傳輸，你會使用 WebRTC。

底層： UDP

為什麼： 在視訊中，掉一個影格沒關係，但不能接受延遲。WebRTC 為了極致的速度，選擇了 UDP。

#### HTTP/3 (QUIC)
這是最新的網頁技術。雖然你寫程式碼時還是用普通的 fetch，但如果伺服器支援 HTTP/3：

底層： UDP (透過一種叫 QUIC 的協定)

特點： 它在 UDP 上面自己寫了一套機制，讓它既有 UDP 的快，又有 TCP 的可靠。